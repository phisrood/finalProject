<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
				 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="Professor">
	<insert id="professorInsert" parameterType="professor">

		INSERT INTO PROFESSOR (
		PRO_USE_ID
		,PRO_DEP_NO
		,PRO_POSITION
		,PRO_BIRTH
		,PRO_PHONE
		,PRO_ZIPCODE
		,PRO_ADD
		,PRO_ADDDETAIL
		,PRO_BLTYPE
		,PRO_HOB
		,PRO_GENDER
		,PRO_ENGNAME
		,PRO_EMAIL
		,PRO_REGNO1
		,PRO_REGNO2)
		VALUES(
		#{pro_use_id}
		,#{pro_dep_no}
		,#{pro_position}
		,#{pro_birth}
		,#{pro_phone}
		,#{pro_zipcode}
		,#{pro_add}
		,#{pro_adddetail}
		,#{pro_bltype}
		,#{pro_hob}
		,#{pro_gender}
		,#{pro_engname}
		,#{pro_email}
		,#{pro_regno1}
		,#{pro_regno2})

	</insert>


	<insert id="userProInsert" parameterType="users">
		INSERT INTO USERS (
		USE_ID
		,USE_KIND
		,USE_NAME
		,USE_PWD
		,AUTHORITY)
		VALUES(
		trim(
		replace(to_char(sysdate, 'yyyy')||TO_CHAR(professor_seq.nextval,'000'),' ',''))
		,#{use_kind}
		,#{use_name}
		,#{use_pwd}
		,#{authority})
		<selectKey resultType="str" keyProperty="use_id" order="AFTER">
			SELECT professor_seq.currval FROM dual
		</selectKey>
	</insert>
</mapper>