<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
				 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="crsesBook">
	<insert id="insertLectureBreak" parameterType="lb">
		INSERT INTO
		LECTURE_BREAKEDOWN
		(LB_NO, LB_NAME, LB_DEPARTMENT,
		LB_COMPLETEKIND,LB_CREDIT, LB_APPROVALYN, LB_REVOKEYN)
		VALUES
		(
		TRIM(TO_CHAR(#{lb_no}, '00000'))
		,#{lb_name}
		,#{lb_department}
		,#{lb_completekind}
		,#{lb_credit}
		,'N'
		,'N'
		)
	</insert>
	<select id="getLbNoMatch" parameterType="str" resultType="str">
		SELECT
		LB_NO
		FROM LECTURE_BREAKEDOWN
		WHERE LB_NO = #{lbNo}
	</select>

	<select id="getCrsesBookList" resultType="lb">
		SELECT *
		FROM
		LECTURE_BREAKEDOWN
		WHERE LB_REVOKEYN='N'
	</select>
	<select id="getCrsesBookListByEmp" resultType="lb">
		SELECT *
		FROM
		LECTURE_BREAKEDOWN
		WHERE LB_REVOKEYN='N'
		AND LB_APPROVALYN = 'N'
	</select>

	<update id="updateCrsesBookDecide" parameterType="map">
		UPDATE
		LECTURE_BREAKEDOWN
		SET LB_APPROVALYN = #{approve}
		WHERE LB_NO in
		<foreach item="item" index="index" collection="array" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</update>
	
	<select id="getCrsesBook" parameterType="str" resultType="lb">
		SELECT *
		FROM LECTURE_BREAKEDOWN
		WHERE LB_NO = #{lb_no}
	</select>
	
	<update id="updateCrsesBook" parameterType="lb">
		UPDATE LECTURE_BREAKEDOWN
		SET LB_NAME = #{lb_name}, LB_CREDIT=#{lb_credit}, LB_COMPLETEKIND=#{lb_completekind},LB_APPROVALYN='N'
		WHERE LB_NO = #{lb_no}
	</update>
</mapper>